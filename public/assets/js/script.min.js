!function(a,t,e){"use strict";var s,n,i=a("body");!function e(){return a(t).on("load, resize",function(a){clearTimeout(s),s=setTimeout(function(){e()},250)}),n=a(t).width(),n<=768?i.addClass("is-mobile"):i.removeClass("is-mobile"),n}(),a(function(){function t(t){var e=a("#"+t);e.addClass("show"),a(".js-modalCloseBtn").on("click",function(){e.removeClass("show")})}function s(a,t){k.splice(a,1,t)}function n(t,e){a.each(C,function(t){var e=a(this),s=k[t];""!==s&&(r(e,s),e.addClass("is-filled is-added").attr({"data-name":s,"data-match":t+1}))});var s=t+1,n=a(".ranking__container").filter('[data-match="'+s+'"]');n.length&&(r(n,e),n.attr({"data-name":e}))}function r(a,t){var e=a,s=t,n='<div class="slot"><div class="slot__logo"><img src="/assets/images/logos/'+s.replace(/\s+/g,"-")+'.png" alt="'+s+'" /></div><div class="slot__name">'+s+"</div></div>";e.html("").append(n)}function o(){f||4==a(".game__options").find(".is-filled").length&&(p("2"),h(".game__board-wrapper"),f=!0,C.addClass("is-draggable"),a(".ranking__container").addClass("is-droppable"),d(),l())}function d(){var t=".is-draggable",e=".is-droppable";a(t).draggable({revert:!0,revertDuration:100,helper:"clone",addClasses:!1,containment:a(".game__board-wrapper"),snap:!0,snapMode:"inner"}),a(e).droppable({accept:t,tolerance:"pointer",addClasses:!1,containment:a(".ranking__list"),drop:function(t,e){var s=a(e.draggable).attr("data-name"),n=a(e.draggable).attr("data-match");a(e.draggable).addClass("was-ranked").draggable("disable"),a(this).hasClass("is-ranked")||(r(a(this),s),a(this).addClass("is-ranked").attr({"data-name":s,"data-match":n}).droppable("option","disabled",!0)),4==a(".ranking__list").find(".is-ranked").length&&(a(".js-submit").removeAttr("disabled"),p("3"),h(".game__form"))}}),a("#gameFinalRank").sortable({items:"> div",cursor:"move",containment:"parent"})}function l(){a(".ranking__container").on("click",function(){a(this).hasClass("is-ranked")||(y.addClass("show"),i.addClass("has-popup"),m(".game__options-list",y),c(a(this)))})}function c(t){var e=a("#cloneOption").find(".slot");e.on("click",function(){var e=a(this).parent(),s=e.attr("data-match"),n=e.attr("data-name");e.hasClass("was-ranked")||(y.removeClass("show"),i.removeClass("has-popup"),r(t,n),t.attr({"data-name":n,"data-match":s}),t.addClass("is-ranked").droppable("option","disabled",!0),a(".game__options").find("[data-match="+s+"]").addClass("was-ranked").draggable("disable"),4==a(".ranking__list").find(".is-ranked").length&&(a(".js-submit").removeAttr("disabled"),p("3"),h(".game__form")))})}function m(t,e){e.html(""),a(t).clone().appendTo(e),e.find(".finalist__container").removeClass("ui-draggable-handle")}function p(a){function t(){for(var a=0;a<n.length;a++)n[a].classList.remove("show")}var s=a,n=e.querySelectorAll(".steps"),i=e.querySelectorAll(".step--one"),r=e.querySelector(".step--two"),o=e.querySelector(".step--three");switch(s){case"1":for(var d=0;d<i.length;d++)i[d].classList.add("show"),i[d].querySelector(".step__arrow").classList.add("bounce");break;case"2":t(),r.classList.add("show"),r.querySelector(".step__arrow").classList.add("bounce");break;case"3":t(),o.classList.add("show"),o.querySelector(".step__arrow").classList.add("bounce")}}function h(t){i.hasClass("is-mobile")&&a("html, body").animate({scrollTop:a(t).offset().top-150})}function _(){w.val(""),a(".js-submit").attr("disabled",!0)}function u(e,s,n){function i(){s.removeClass("hide"),n.removeClass("show")}var r=(a(".ranking__container").attr("data-name"),{lang:a("html").attr("lang"),username:e,champion:a(".ranking__container:first-child()").attr("data-name"),first_place:a(".ranking__container:nth-child(2)").attr("data-name"),second_place:a(".ranking__container:nth-child(3)").attr("data-name"),third_place:a(".ranking__container:nth-child(4)").attr("data-name")}),o="/api/v1/predict";a.ajax({url:o,type:"POST",async:!1,data:r,dataType:"json",success:function(a){t("formAlertModal"),i(),_()},error:function(){a(".form__alert--error").addClass("show"),i()}})}var f,g=a(".game__match"),v=a(".slot"),b=g.find(v),C=a(".game__options-list").find(".finalist__container"),k=(a(".ranking__list"),[]),w=a(".form__input"),y=(a(".is-droppable"),a(".game__options-popup"));k[0]="",k[1]="",k[2]="",k[3]="",p("1"),t("termsModal"),b.on("click",function(){var t=a(this),e=t.attr("data-name"),i=t.parent().attr("data-match")-1;if(t.parent().hasClass("has-selection")){var r=t.parent().find(".is-selected");r.attr("data-name");r.removeClass("is-selected"),t.addClass("is-selected")}else t.addClass("is-selected").parent().addClass("has-selection");s(i,e),n(i,e),o()}),a(".js-showTerms").on("click",function(a){t("termsModal"),a.preventDefault()}),a(".js-submit").on("click",function(t){t.preventDefault();var e=a(this),s=e.find(".spinner"),n=e.find(".text"),i=w.val();i?(n.addClass("hide"),s.addClass("show"),u(i,n,s)):w.addClass("error")}),w.on("blur",function(){""!==a(this).val()&&a(this).removeClass("error")})})}(jQuery,window,document);